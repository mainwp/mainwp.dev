<!DOCTYPE html>
<html lang="{{ site.dox.language }}">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title>{% if page.title %}{{ page.title }}{% else %}{{ site.dox.title }}{% endif %}</title>
        <meta name="description" content="{% if page.description %}{{ page.description }}{% else %}{{ site.dox.description }}{% endif %}">

        <link rel="canonical" href="{{ page.url | replace: 'index.html', '' | absolute_url }}">
        <link rel="shortcut icon" href="{{ '/favicon.ico' | absolute_url }}" type="image/x-icon">

        <!-- Theme styles -->
        <link rel="stylesheet" href="{{ '/dox-theme/assets/css/style.css' | absolute_url }}">
    </head>
    <body class="homepage">
        {% include header.html %}

        {{ content }}

        {% include footer.html %}

        <!-- Theme scripts -->
        <script src="{{ '/dox-theme/assets/js/vendor/jquery.min.js' | absolute_url }}" defer></script>
        <script src="{{ '/dox-theme/assets/js/vendor/highlight.pack.js' | absolute_url }}" defer></script>
        <script defer>
          // Defer initialization until DOM is ready and scripts are loaded
          document.addEventListener('DOMContentLoaded', (event) => {
            if (typeof hljs !== 'undefined') {
              // TODO: Replace deprecated call with hljs.highlightAll(); later
              hljs.initHighlightingOnLoad(); 
            } else {
              console.error('Highlight.js (hljs) not loaded');
            }
          });
        </script>
        <script src="{{ '/dox-theme/assets/js/theme-toggle.js' | absolute_url }}" defer></script> <!-- Added for consistency -->
        <script src="{{ '/dox-theme/assets/js/scripts.js' | absolute_url }}" defer></script>
        <script src="{{ '/dox-theme/assets/js/navigation.js' | absolute_url }}" defer></script> <!-- Added missing navigation script -->
        <script src="{{ '/dox-theme/assets/js/code-blocks.js' | absolute_url }}" defer></script> <!-- Added for code block enhancement -->

        {% if site.dox.google_analytics.tracking_code and jekyll.environment == 'production' %}
            <!-- Google Analytics -->
            <script>
                (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
                ga('create', '{{ site.dox.google_analytics.tracking_code }}', 'auto');
                ga('send', 'pageview');
            </script>
        {% endif %}
    </body>
</html>

<style>
/* Homepage specific styles */
.homepage {
    background-color: var(--mainwp-dark-bg);
    color: var(--mainwp-dark-text);
}

.homepage h2 {
    font-size: 2rem;
    margin: 3rem 0 2rem;
    color: var(--mainwp-dark-text);
}

.c-feature-card {
    display: block;
    padding: 2rem;
    background-color: rgba(0, 0, 0, 0.2);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: var(--dox-border-radius);
    text-decoration: none;
    transition: var(--dox-transition-base);
    height: 100%;
}

.c-feature-card:hover {
    background-color: rgba(255, 255, 255, 0.05);
    transform: translateY(-2px);
}

.c-feature-card h3 {
    color: var(--mainwp-primary);
    margin-bottom: 1rem;
}

.c-feature-card p {
    color: var(--mainwp-dark-text);
    opacity: 0.8;
    margin: 0;
}

@media (max-width: 768px) {
    .homepage h2 {
        font-size: 1.5rem;
        margin: 2rem 0 1.5rem;
    }

    .c-feature-card {
        margin-bottom: 1rem;
    }
}
</style>
